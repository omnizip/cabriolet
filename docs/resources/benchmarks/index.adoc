---
layout: default
title: Benchmarks
parent: Appendix
has_children: true
---

== Performance Benchmarks

=== Overview

This section provides comprehensive performance benchmark data for Cabriolet, including compression ratios, speed comparisons, memory usage profiles, and platform-specific performance metrics.

=== Benchmark Environment

All benchmarks were conducted using:

* **Hardware**: Intel Core i7-10700K @ 3.8GHz, 32GB RAM
* **Operating System**: Ubuntu 22.04 LTS (Linux kernel 5.15)
* **Ruby Version**: Ruby 3.2.2
* **Cabriolet Version**: 0.3.0
* **Test Date**: October 2024

=== Test Dataset

The benchmark suite uses a standardized dataset:

[cols="1,1,1,2", options="header"]
|===
| Category | Files | Total Size | Description

| Text Files
| 500
| 125 MB
| Source code, documentation, logs

| Binary Files
| 200
| 450 MB
| Executables, libraries, images

| Mixed Archives
| 50
| 200 MB
| Real-world installer packages

| Large Files
| 10
| 500 MB
| Individual large files (>50MB each)

| **Total**
| **760**
| **1.27 GB**
| Complete test dataset
|===

=== Available Benchmark Reports

==== xref:../compression-benchmarks.adoc[Compression Algorithm Benchmarks]

Detailed performance metrics for each compression algorithm:

* Compression speed (MB/s)
* Decompression speed (MB/s)
* Compression ratio (%)
* Memory usage during compression/decompression

==== xref:../format-benchmarks.adoc[Format-Specific Benchmarks]

Performance comparisons across different archive formats:

* CAB vs. ZIP vs. 7z
* Format overhead analysis
* Multi-volume performance
* Metadata extraction speed

==== xref:../platform-benchmarks.adoc[Platform and Ruby Version Benchmarks]

Cross-platform and Ruby version comparisons:

* Windows vs. Linux vs. macOS
* Ruby 2.7 vs. 3.0 vs. 3.1 vs. 3.2
* 32-bit vs. 64-bit performance
* JRuby vs. MRI performance

==== xref:../memory-benchmarks.adoc[Memory Usage Profiles]

Memory consumption analysis:

* Peak memory usage by algorithm
* Memory scaling with file size
* Memory-constrained scenarios
* Garbage collection impact

=== Key Findings Summary

==== Compression Speed

Best performing algorithms:

1. **MSZIP**: 45-65 MB/s (balanced performance)
2. **None**: 180-250 MB/s (copy-only)
3. **LZSS**: 35-50 MB/s (simple compression)

Slowest:

* **LZX**: 8-15 MB/s (maximum compression)

==== Decompression Speed

Best performing:

1. **None**: 200-300 MB/s
2. **LZSS**: 80-120 MB/s
3. **MSZIP**: 70-100 MB/s
4. **LZX**: 55-85 MB/s

==== Compression Ratio

Best ratios on text files:

1. **LZX (2MB window)**: 92-95% reduction
2. **LZX (256KB window)**: 88-92% reduction
3. **Quantum (Level 7)**: 82-88% reduction
4. **MSZIP**: 75-82% reduction

==== Memory Efficiency

Lowest memory usage:

1. **LZSS**: ~8KB working memory
2. **MSZIP**: ~64KB working memory
3. **LZX (32KB window)**: ~150KB working memory

Highest:

* **LZX (2MB window)**: ~2.5MB decompression, ~10MB compression

=== Performance Recommendations

==== For Speed-Critical Applications

Use **MSZIP** compression:

* Good balance of speed and ratio
* Moderate memory usage
* Wide compatibility

==== For Size-Critical Applications

Use **LZX** with large window:

* Best compression ratios
* Acceptable decompression speed
* Higher memory requirements

==== For Memory-Constrained Environments

Use **LZSS** or **MSZIP**:

* Low memory footprint
* Reasonable compression ratios
* Fast decompression

==== For Maximum Compatibility

Use **MSZIP** (CAB Type 1):

* Universal support
* Predictable performance
* Standard Deflate algorithm

=== Methodology

==== Compression Benchmarks

1. Each test file compressed 10 times
2. Best and worst times discarded
3. Average of remaining 8 runs reported
4. Cold cache (file system caches cleared between runs)
5. Single-threaded execution

==== Memory Measurements

1. Peak RSS (Resident Set Size) measured
2. GC disabled during measurement
3. Multiple iterations averaged
4. Includes Ruby VM overhead

==== Platform Tests

1. Identical test datasets across platforms
2. Same Ruby version where possible
3. Native CPU architecture (no emulation)
4. Results normalized to single-core performance

=== Interpreting Results

==== Compression Speed

* Measured in MB/s of input data
* Higher is better
* Varies significantly with data type
* Text compresses faster than binary

==== Compression Ratio

* Percentage reduction in size
* Higher is better
* Pre-compressed data (JPEG, PNG) shows 0-5%
* Text/code shows 75-95%

==== Memory usage

* Peak memory during operation
* Lower is better
* Includes Ruby VM overhead (~15-20MB baseline)
* Scales with window size for LZX

=== Contributing Benchmarks

To contribute benchmark results:

1. Use the provided benchmark suite
2. Document your environment completely
3. Run multiple iterations
4. Share raw data and methodology
5. Submit via pull request

See: xref:developer/contributing.adoc[Contributing Guide]

=== See also

* xref:guides/compression/choosing-algorithm.adoc[Choosing Compression Algorithm]
* xref:guides/advanced-usage/performance-tuning.adoc[Performance Tuning]
* xref:../../guides/formats/format-comparison.adoc[Format Comparison]